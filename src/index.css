/*
 * Main stylesheet for the Farm Geotagging Application
 * This file includes:
 * - Tailwind CSS directives for utility-first styling
 * - Base styles for global elements and typography
 * - Custom component styles for buttons, cards, and forms
 * - Utility classes for enhanced functionality
 * - Custom animations for smooth interactions
 * - Third-party library customizations (Leaflet, Toastify)
 * - Responsive design utilities
 * - Accessibility and performance optimizations
 * - Dark mode support
 */

@tailwind base;
@tailwind components;
@tailwind utilities;

/* ============================================
   BASE LAYER - GLOBAL STYLES
   ============================================ */

@layer base {
  /* Global transition for smooth color changes */
  * {
    @apply transition-colors duration-200;
  }

  /* Body styles with font stack and background colors */
  body {
    @apply antialiased bg-bgLight dark:bg-bgDark text-textLight dark:text-textDark;
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',
      'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',
      sans-serif;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  /* Smooth scrolling for anchor links */
  html {
    scroll-behavior: smooth;
  }

  /* Fix for iOS Safari viewport height issues with notches */
  html,
  body,
  #root {
    min-height: 100vh;
    min-height: -webkit-fill-available;
  }
}

/* ============================================
   COMPONENTS LAYER - REUSABLE COMPONENT STYLES
   ============================================ */

@layer components {
  /* Primary button style with hover effects and accessibility */
  .btn-primary {
    @apply px-4 py-2 font-medium text-white transition-all duration-200 transform rounded-lg shadow-md bg-primary-600 hover:bg-primary-700 hover:shadow-lg hover:scale-105 active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none;
  }

  /* Secondary button style for less prominent actions */
  .btn-secondary {
    @apply px-4 py-2 font-medium text-white transition-all duration-200 transform rounded-lg shadow-md bg-secondary-500 hover:bg-secondary-600 hover:shadow-lg hover:scale-105 active:scale-95;
  }

  /* Outline button style for secondary actions */
  .btn-outline {
    @apply px-4 py-2 font-medium transition-all duration-200 border-2 rounded-lg border-primary-600 text-primary-600 hover:bg-primary-600 hover:text-white;
  }

  /* Card component with hover lift effect */
  .card {
    @apply transition-all duration-300 transform bg-white shadow-lg dark:bg-gray-800 rounded-xl hover:shadow-xl hover:-translate-y-1;
  }

  /* Flat card variant without hover effects */
  .card-flat {
    @apply bg-white shadow-md dark:bg-gray-800 rounded-xl;
  }

  /* Form input field styling with focus states */
  .input-field {
    @apply w-full px-4 py-2 text-gray-900 transition-all duration-200 bg-white border border-gray-300 rounded-lg dark:border-gray-600 focus:ring-2 focus:ring-primary-500 focus:border-transparent dark:bg-gray-700 dark:text-white;
  }

  .input-field:focus {
    @apply outline-none;
  }

  /* Form label styling */
  .label {
    @apply block mb-2 text-sm font-medium text-gray-700 dark:text-gray-300;
  }
}

/* ============================================
   UTILITIES LAYER - CUSTOM UTILITY CLASSES
   ============================================ */

@layer utilities {
  /* Custom thin scrollbar styling */
  .scrollbar-thin::-webkit-scrollbar {
    width: 8px;
    height: 8px;
  }

  .scrollbar-thin::-webkit-scrollbar-track {
    @apply bg-gray-100 dark:bg-gray-800;
  }

  .scrollbar-thin::-webkit-scrollbar-thumb {
    @apply bg-gray-300 rounded-full dark:bg-gray-600;
  }

  .scrollbar-thin::-webkit-scrollbar-thumb:hover {
    @apply bg-gray-400 dark:bg-gray-500;
  }

  /* Hide scrollbar while maintaining scroll functionality */
  .scrollbar-hide::-webkit-scrollbar {
    display: none;
  }

  .scrollbar-hide {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }

  /* Gradient text effect using background clipping */
  .gradient-text {
    @apply text-transparent bg-clip-text bg-gradient-to-r from-primary-600 to-secondary-500;
  }

  /* Glass morphism effect with backdrop blur */
  .glass {
    @apply backdrop-blur-md bg-white/70 dark:bg-gray-900/70;
  }

  /* Safe area utilities for mobile devices with notches */
  .safe-top {
    padding-top: env(safe-area-inset-top);
  }

  .safe-bottom {
    padding-bottom: env(safe-area-inset-bottom);
  }

  /* Touch target size for accessibility (minimum 44px) */
  .touch-target {
    min-width: 44px;
    min-height: 44px;
  }
}

/* ============================================
   CUSTOM ANIMATIONS
   ============================================ */

/* Fade in animation for smooth appearance */
@keyframes fadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

.animate-fadeIn {
  animation: fadeIn 0.5s ease-in-out;
}

/* Slide up animation for bottom-appearing elements */
@keyframes slideUp {
  from {
    transform: translateY(20px);
    opacity: 0;
  }
  to {
    transform: translateY(0);
    opacity: 1;
  }
}

.animate-slideUp {
  animation: slideUp 0.5s ease-out;
}

/* Slide down animation for top-appearing elements */
@keyframes slideDown {
  from {
    transform: translateY(-20px);
    opacity: 0;
  }
  to {
    transform: translateY(0);
    opacity: 1;
  }
}

.animate-slideDown {
  animation: slideDown 0.3s ease-out;
}

/* Scale in animation for modal-like appearances */
@keyframes scaleIn {
  from {
    transform: scale(0.9);
    opacity: 0;
  }
  to {
    transform: scale(1);
    opacity: 1;
  }
}

.animate-scaleIn {
  animation: scaleIn 0.3s ease-out;
}

/* Shimmer loading effect for skeleton screens */
@keyframes shimmer {
  0% {
    background-position: -1000px 0;
  }
  100% {
    background-position: 1000px 0;
  }
}

.animate-shimmer {
  animation: shimmer 2s infinite;
  background: linear-gradient(
    to right,
    #f0f0f0 0%,
    #e0e0e0 20%,
    #f0f0f0 40%,
    #f0f0f0 100%
  );
  background-size: 1000px 100%;
}

/* Dark mode shimmer variant */
.dark .animate-shimmer {
  background: linear-gradient(
    to right,
    #374151 0%,
    #4b5563 20%,
    #374151 40%,
    #374151 100%
  );
  background-size: 1000px 100%;
}

/* ============================================
   LEAFLET MAP CUSTOM STYLES
   ============================================ */

/* Custom popup styling for map markers */
.leaflet-popup-content-wrapper {
  @apply rounded-lg shadow-xl;
  padding: 0;
}

.leaflet-popup-content {
  margin: 0;
  min-width: 250px;
}

.leaflet-popup-tip {
  @apply bg-white dark:bg-gray-800;
}

/* Dark mode styling for map controls */
.dark .leaflet-control-zoom a,
.dark .leaflet-control-layers-toggle {
  @apply text-white bg-gray-800 border-gray-700;
}

.dark .leaflet-control-zoom a:hover {
  @apply bg-gray-700;
}

/* Marker cluster styling with size-based colors */
.marker-cluster-small {
  background-color: rgba(22, 163, 74, 0.6);
}

.marker-cluster-small div {
  background-color: rgba(22, 163, 74, 0.8);
  @apply text-white;
}

.marker-cluster-medium {
  background-color: rgba(251, 191, 36, 0.6);
}

.marker-cluster-medium div {
  background-color: rgba(251, 191, 36, 0.8);
  @apply text-white;
}

.marker-cluster-large {
  background-color: rgba(239, 68, 68, 0.6);
}

.marker-cluster-large div {
  background-color: rgba(239, 68, 68, 0.8);
  @apply text-white;
}

/* ============================================
   REACT TOASTIFY CUSTOMIZATION
   ============================================ */

/* Base toast styling */
.Toastify__toast {
  @apply rounded-lg shadow-lg;
}

/* Toast variants for different message types */
.Toastify__toast--success {
  @apply text-white bg-green-500;
}

.Toastify__toast--error {
  @apply text-white bg-red-500;
}

.Toastify__toast--warning {
  @apply text-white bg-yellow-500;
}

.Toastify__toast--info {
  @apply text-white bg-blue-500;
}

.Toastify__progress-bar {
  @apply bg-white/30;
}

/* ============================================
   LOADING SKELETON
   ============================================ */

/* Base skeleton loading style */
.skeleton {
  @apply bg-gray-200 rounded animate-pulse dark:bg-gray-700;
}

/* Text skeleton variant */
.skeleton-text {
  @apply h-4 bg-gray-200 rounded dark:bg-gray-700;
}

/* Avatar skeleton variant */
.skeleton-avatar {
  @apply w-12 h-12 bg-gray-200 rounded-full dark:bg-gray-700;
}

/* ============================================
   RESPONSIVE UTILITIES
   ============================================ */

/* Mobile-specific styles */
@media (max-width: 640px) {
  .mobile-full-width {
    width: 100vw;
    margin-left: calc(-50vw + 50%);
  }
}

/* Print styles - hide non-essential elements */
@media print {
  .no-print {
    display: none !important;
  }
}

/* ============================================
   ACCESSIBILITY
   ============================================ */

/* Enhanced focus indicators for keyboard navigation */
*:focus-visible {
  @apply outline-2 outline-offset-2 outline-primary-500;
}

/* Screen reader only content */
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

/* High contrast mode support */
@media (prefers-contrast: high) {
  .btn-primary {
    @apply border-2 border-black dark:border-white;
  }
}

/* Reduced motion support for users with vestibular disorders */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}

/* ============================================
   DARK MODE SPECIFIC ADJUSTMENTS
   ============================================ */

.dark {
  color-scheme: dark;
}

/* Improve image visibility in dark mode */
.dark img {
  @apply brightness-90;
}

/* Dark mode form input placeholders */
.dark input::placeholder,
.dark textarea::placeholder {
  @apply text-gray-500;
}

/* ============================================
   MOBILE OPTIMIZATIONS
   ============================================ */

/* Prevent text size adjustment on mobile zoom */
html {
  -webkit-text-size-adjust: 100%;
  -moz-text-size-adjust: 100%;
  -ms-text-size-adjust: 100%;
}

/* Remove tap highlight on mobile devices */
* {
  -webkit-tap-highlight-color: transparent;
}

/* Smooth scrolling for touch devices */
@supports (-webkit-overflow-scrolling: touch) {
  .smooth-scroll {
    -webkit-overflow-scrolling: touch;
  }
}

/* ============================================
   PERFORMANCE OPTIMIZATIONS
   ============================================ */

/* GPU acceleration for transform-heavy elements */
.gpu-accelerated {
  transform: translateZ(0);
  will-change: transform;
}

/* CSS containment for better rendering performance */
.contain-layout {
  contain: layout style paint;
}
